## 대칭키, 공개키(비대칭키)란 무엇인가?!

대칭키랑 공개키의 차이를 수도 없이 봤지만, 막상 설명해야 할 때 헷갈리는 경우가 많다.

대칭키의 장단점은 무엇이고, 어떠한 단점을 해결하기 위해 공개키가 등장하게 되었는지 등을 알아보자.

해당 포스팅에서 내용을 확실하게 정리하면서 다시는 헷갈리지 않도록 하자!

## 개요

- **대칭키 암호화 방식**은 암복호화에 사용하는 키가 동일한 암호화 방식을 말한다.
- **공개키 암호화 방식**은 암복호화에 사용하는 키가 서로 다른 암호화 방식을 말한다. (비대칭키 암호화라고도 한다.)

## 대칭키

![img.png](img.png)

대칭키는 위에서 설명한대로 암복호화키가 동일하므로 해당 키를 아는 사람이 문서를 복호화할 수 있게 된다.

대표적인 알고리즘은으로는 **DES**, **3DES**, **AES**, **SEED**, **ARIA** 등이 있다.

공개키 암호화 방식에 비해 연산 속도가 빠르다는 장점이 있지만, **키를 교환해야 하는 문제가 발생**한다. 키를 교환하는 중 키가 탈취될 수도 있다.

추가로 사용자가 증가할수록 각각의 키가 필요하기에 관리해야 할 키가 방대하게 많아진다.

이러한 문제를 해결하기 위한 방법으로 **키의 사전 공유**, **키 배포 센터 사용**, **Diffie-Hellman 키 교환**, **공개키 암호화 방식** 등이 있다.

## 공개(비 대칭)키

![img_1.png](img_1.png)

위에서 설명했듯 공개키 암호화 방식은 효율은 떨어지지만, **대칭키 암호화 방식의 키를 교환해야 하는 문제를 해결**하기 위해 등장했다.

A가 B에게 데이터를 보낸다고 할 때, A는 B의 공개키로 암호화한 데이터를 보내고 B는 본인의 개인키로 해당 암호화된 데이터를 복호화해서 보게 된다.
- 암호화된 데이터는 B의 공개키에 대응되는 개인키를 갖고 있는 B만이 볼수 있게 된다.

공개키는 키가 공개되어 있기 때문에 따로 키 교환이나 분배를 할 필요가 없게 된다. 중간 공격자가 B의 공개키를 얻는다고 해도 B의 개인키로만 복호화가 가능하다.

-> 키 전달 문제를 해결하여 더 안전하지만, 암호화와 복호화를 위해 복잡한 수학 연산을 수행하기 때문에 대칭키 알고리즘에 비해 속도가 느리다.

애표적인 알고리즘으로는 **Diffie-Hellman**, **RSA**, **DSA**, **ECC**, 등이 있다.

## 추가

대칭키 알고리즘은 기밀성을 제공하고, 무결성/인증/부인방지를 제공하지 않는다.
공개키 알고리즘은 기밀성/인증/부인방지 기능을 제공한다.

각각의 의미는 아래를 참고하자.
- 기밀성(Confidentiality): 인가되지 않은 자는 정보를 확인하지 못하도록 하며, 정보가 유출되더라도 평문으로 해독할 수 없고 변조 또는 위조하지 못하도록 기밀을 유지한다.
- 무결성(Integrity): 인가 되지 않은 자로 부터 위조 또는 변조가 발생하지 않았는지 확인
- 인증(Authentication): 수신 받은 메시지가 송신자 본인이라는 것을 확인하고 증명한다.
- 부인 방지(Non-repudiation): 메시지를 보낸 사람이 보낸 사실을 부인하거나, 받은 사람이 받은 사실을 부인할 경우 증명하는 기술을 말한다.

여기서 무결성은 대칭키, 공개키 알고리즘 모두 성립하지 않는다. 따라서 전자 서명(인증서)을 추가함으로써 무결성을 보장한다.

### HTTPS

대칭키만을 사용하면 키가 탈취될 수 있다는 위험이 존재한다. 그렇다고 공개키만을 사용하면 HTTP 메시지의 길이가 크다면 부하에 무리를 줄 수 있다.
(암호화, 복호화 알고리즘이 매우 복잡함)

그래서 HTTPS에서는 공개(비 대칭)키 방식으로 대칭키를 전달하고, 서로 공유된 대칭키를 가지고 통신하게 된다.

과정을 정리하면 아래와 같다.
1. A는 B의 공개키로 암호화 통신에 사용할 대칭키를 암호화해서 B에게 보낸다.
2. B는 암호문을 받고 자신의 비밀키로 복호화한다.
3. B는 A로부터 얻은 대칭키로 A에게 보낼 평문을 암호화하여 A에게 보낸다.
4. A는 자신의 대칭키로 암호문을 복호화한다.
5. 앞으로 해당 대칭키로 계속 통신한다.

즉, 사용자 측에서는 대칭키 알고리즘을 통해 안전하게 키 교환을 한 후 해당 키로 대칭키 알고리즘을 통해 통신하게 된다.

## 참고
- https://liveyourit.tistory.com/183
