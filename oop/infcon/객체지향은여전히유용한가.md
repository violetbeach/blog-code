객체지향이 여전히 유요한가..?

결제처럼 복잡한 도메인에서도 충분히 활용할 수 있을 지..?

-> 해당 부분에 대한 해답이 될 것

## 예시 1 - 장바구니 & 프로모션

요구사항

- 장바구니 주문 금액이 프로모션 기준 금액보다 작다면 할인을 적용한다.

절차지향 - 구현

- 비즈니스 클래스에서 데이터를 꺼내서 특정 동작을 적용한다.

객체지향 - 구현
- Promotion은 basePrice를 가지고, 장바구니를 받아서 할인을 적용하는 메서드를 가진다.
- Cart는 전체 금액을 조회하는 메서드를 가진다.

아래와 같은 요구사항을 적용할 때 **코드가 어떻게 변경될 지**가 매우 중요함!
- 할인 여부를 판단하는데 Promotion 기준 금액이 Range로 변경된다면?

절차적인 데이터는 데이터 및 비즈니스 클래스 모두 변경되어야 함. 반면 객체지향 설계라면 Promotion 클래스만 변경되면 됨. (결합도 낮음)

## 예시 2 - 할인 타입 추가 (전체 수량)

적용해야되는 비즈니스 로직이 바뀌는 경우도 자주 생기곤 한다.

요구사항

- 할인 여부를 금액 뿐 아니라 개수로 판단하는 타입을 추가한다.

절차지향 - 구현

- 도메인 클래스에서 타입을 추가하고, 비즈니스 클래스에서 switch 분기를 추가한다.

객체지향 - 구현

- 다형성을 활용해서 `DiscountCondition`, `PriceCondition` 인터페이스를 추가해야 한다.
- 객체지향 설계에서는 특정 로직을 각 클래스로 분배가 된다.

절차지향 설계는 국소적인 수정만 들어가고, 객체지향 설계는 큰 변경이 들어가게 된다.
하지만, 요구사항이 더 추가될 때 객체지향 설계는 기존 로직의 변경 없이 데이터 변경과 타입 확장이 쉽게 가능하다.

객체지향 설계는 여기서 Interface의 구현을 강제하기 때문에 설계가 안전해진다.

## 예시 3 - 할인 타입 추가 (특정 상품)

요구사항

- 특정 상품을 기준으로 할인 여부를 판단

절차지향 - 구현

- PromotionProcess 클래스에 메서드 하나 추가 (간단)
- 단, 여기서 더 이상 요구사항을 받기는 어려워짐

객체지향 - 구현
- Promotion과 각 Condition 인터페이스, 클래스에 메서드 하나 추가
- 즉, 변경이 많음.

절차 지향 설계가 좋은 경우는 타입의 계층 자체가 확장(기능의 확장)될 때 유리할 수 있음. 객체지향 설계는 타입까지가 확장되는 경우에 유리함

## 정리 

절차 지향 설계
- 데이터 변환이 유리
- 데이터 중심인 경우 유리
- 데이터 노출
- 기능 추가에 유리

객체지향 설계
- 규칙에 기반한 상태 변경
- 행동 중심
- 데이터 캡슐화
- 타입 확장에 유리

일반적인 레이어 설계
- 프레젠테이션 계층: 절차
- 서비스 계층: 절차
- 도메인 계층: 객체
- 영속성 계층: 절차

즉, 객체지향은 일반적으로 절차지향보다 더 작은 상황에서 유용하다.

-> 우선 배워두고 유용한 상황에 활용하는 것이 목적. 모든 코드를 객체지향 적으로 설계하는 것은 어불성설
