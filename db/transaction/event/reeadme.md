## 선착순 이벤트를 처리하기 위한 방법들 (Queue, Lock, Isolation, ...)

만약에 특정 기업에서 선착순 50명에게 맥북을 1만원에 파는 이벤트를 한다고 하자.

어떻게 처리하면 될까..?

## 문제 상황

'그냥 DB에 Select하고 50명이 없을 경우 Insert하면 되지 않나??' 라고 생각하면 안되다.

다수의 스레드가 SELECT를 수행한 시점에 50건이 없었다면, 모두 Insert를 수행할 것이다.

이러한 실시간 선착순 이벤트에서 고려해야 하는 부분은 다음과 같다.
- 다수의 서버, 다수의 스레드에서 동시성을 어떻게 보장할 지
- 한 번에 쏠리는 트래픽을 어떻게 처리할 지

## Queue

대표적인 솔루션으로 Redis를 적용할 수 있다.

Redis의 경우 분산 처리가 가능하고 자원 낭비가 적으므로 트래픽을 효과적으로 처리할 수 있고,

싱글 스레드로 동작하기 때문에 데이터가 atomic하게 유지되어 동시성 이슈를 해결할 수 있다.