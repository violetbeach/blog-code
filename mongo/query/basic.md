## 캐시

MognoDB도 다른 대부분의 DBMS처럼 스토리지엔진에 캐시 영역을 사용한다.

그래서 동일한 쿼리를 2번 보낼 때 2번쨰 쿼리가 훨씬 빨리 나간다.

복잡한 쿼리라면 체감이 더 심해지게 된다.

가령 10년 동안 운영한 채팅 서버가 있다고 가정하자.

- 1 year -> 1PB
- 1 month -> 100GB (Working Set)

만약 Cache가 80GB라면 어떻게 될까..? 이렇게 Working Set보다 캐시가 작은 문제를 Cache Eviction이라고 한다.

Server의 Spec Up을 하면 비용이 발생하기 때문에 최후에 선택한다.

## Query Plan

이러한 캐시 부족 문제를 아래의 방법으로 해결할 수 있다.
- 모델링
- 인덱싱
- 쿼리 튜닝
- 비즈니스 요구사항을 변경

여기서 Optimizer가 어떤 Plan을 선택했는 지에 따라 적합한 솔루션이 달라질 수 있다.

그래서 Query Plan을 읽는 것이 중요하다.